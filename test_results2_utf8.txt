docker :  Container 
sujet_cnam-db-1  
Running
Au caractère Ligne:1 : 
1
+ docker compose run 
-T --build --rm api 
pytest -v > 
test_results2.txt  ...
+ ~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~
~~
    + CategoryInfo     
         : 
NotSpecified    : ( 
Container sujet    
_cnam-db-1  Running    
:String) [], Remote    
Exception
    + 
FullyQualifiedErr    
orId : NativeComman    
dError
 
 Container 
sujet_cnam-minio-1  
Running
Compose can now delegate builds to bake for better performance.
 To do so, set COMPOSE_BAKE=true.
#0 building with "desktop-linux" instance using docker driver

#1 [api internal] load build definition from Dockerfile
#1 transferring dockerfile: 526B 0.0s done
#1 DONE 0.1s

#2 [api internal] load metadata for docker.io/library/python:3.11-slim
#2 DONE 1.3s

#3 [api internal] load .dockerignore
#3 transferring context: 2B done
#3 DONE 0.0s

#4 [api internal] load build context
#4 transferring context: 7.82kB 0.0s done
#4 DONE 0.0s

#5 [api 1/7] FROM docker.io/library/python:3.11-slim@sha256:c8271b1f627d0068857dce5b53e14a9558603b527e46f1f901722f935b786a39
#5 resolve docker.io/library/python:3.11-slim@sha256:c8271b1f627d0068857dce5b53e14a9558603b527e46f1f901722f935b786a39
#5 resolve docker.io/library/python:3.11-slim@sha256:c8271b1f627d0068857dce5b53e14a9558603b527e46f1f901722f935b786a39 0.0s done
#5 DONE 0.1s

#6 [api 2/7] WORKDIR /app
#6 CACHED

#7 [api 3/7] RUN apt-get update     && apt-get install -y --no-install-recommends build-essential libpq-dev curl     && rm -rf /var/lib/apt/lists/*
#7 CACHED

#8 [api 4/7] COPY requirements.txt ./
#8 CACHED

#9 [api 5/7] RUN pip install --no-cache-dir -r requirements.txt
#9 CACHED

#10 [api 6/7] COPY app ./app
#10 CACHED

#11 [api 7/7] COPY tests ./tests
#11 DONE 0.1s

#12 [api] exporting to image
#12 exporting layers 0.1s done
#12 exporting manifest sha256:a94a223a4af09ee5848876ab867e2be993a444595b4beb0425428d1ac408eb09 0.0s done
#12 exporting config sha256:160f1c12eebd8e08334b8a85f65905a0bc8fe9f49b733a11956a66e56082a940 0.0s done
#12 exporting attestation manifest sha256:1394a4ceccd35d0a713787883c45d0e1f45b07ab3db1e0cec20d05dca92a3593 0.0s done
#12 exporting manifest list sha256:81f3b181535a252a73a1d5f216c1f8736ebb62e9c9180e91b2ec6ded8a638ea2
#12 exporting manifest list sha256:81f3b181535a252a73a1d5f216c1f8736ebb62e9c9180e91b2ec6ded8a638ea2 0.0s done
#12 naming to docker.io/library/sujet_cnam-api:latest done
#12 unpacking to docker.io/library/sujet_cnam-api:latest 0.1s done
#12 DONE 0.4s

#13 [api] resolving provenance for metadata file
#13 DONE 0.0s
============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-7.4.4, pluggy-1.6.0 -- /usr/local/bin/python3.11
cachedir: .pytest_cache
rootdir: /app
plugins: asyncio-0.23.4, anyio-4.12.1
asyncio: mode=Mode.STRICT
collecting ... collected 12 items

tests/test_audit_chain.py::test_audit_chain_ok PASSED                    [  8%]
tests/test_audit_chain.py::test_audit_chain_detects_corruption PASSED    [ 16%]
tests/test_db_models.py::test_insert_and_read_separated_silos PASSED     [ 25%]
tests/test_health.py::test_health_returns_ok PASSED                      [ 33%]
tests/test_iam.py::test_db_role_is_not_privileged_and_has_needed_grants PASSED [ 41%]
tests/test_paillier.py::test_encrypt_decrypt_roundtrip PASSED            [ 50%]
tests/test_paillier.py::test_homomorphic_addition PASSED                 [ 58%]
tests/test_paillier.py::test_add_plaintext_optimization PASSED           [ 66%]
tests/test_upload_photo.py::test_upload_photo_stores_object_and_metadata PASSED [ 75%]
tests/test_votes_aggregate.py::test_aggregate_votes_homomorphic_sum PASSED [ 83%]
tests/test_votes_aggregate.py::test_aggregate_no_votes_returns_zero PASSED [ 91%]
tests/test_votes_send.py::test_send_vote_stores_ciphertext_and_audit PASSED [100%]

============================== 12 passed in 3.10s ==============================
